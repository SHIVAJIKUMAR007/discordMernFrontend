(this.webpackJsonpbasics=this.webpackJsonpbasics||[]).push([[0],{112:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),c=t(31),l=t.n(c),o=(t(83),t(36)),s=(o.a.initializeApp({apiKey:"AIzaSyCcVCjjh8oan-sVyyonlvbETby5rDno6Ps",authDomain:"discord-clone-693f0.firebaseapp.com",databaseURL:"https://discord-clone-693f0.firebaseio.com",projectId:"discord-clone-693f0",storageBucket:"discord-clone-693f0.appspot.com",messagingSenderId:"1069644443900",appId:"1:1069644443900:web:38228365b2800d31e32779"}),o.a.auth()),i=new o.a.auth.GoogleAuthProvider,m=(t(87),t(20)),u=t.n(m),d=t(26),p=t(30),E=(t(89),t(64)),h=t.n(E),f=t(65),v=t.n(f),g=t(66),b=t.n(g),N=t(67),w=t.n(N),S=t(68),y=t.n(S),O=t(43),I=t.n(O),j=t(63),_=t.n(j),A=t(62),k=t.n(A),x=t(125),R=t(7),C=t(57),D=t.n(C).a.create({baseURL:"http://localhost:5000/"}),T=t(12),U=function(e){return{type:"GET_ROOM_MASSAGES",payload:e}};var W=function(e){var a=e.name,t=e.picUrl,n=e.massage,c=e.time;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chatMassage"},r.a.createElement(x.a,{className:"massageAvatar",src:t}),r.a.createElement("div",{className:"massageChat"},r.a.createElement("p",{style:{fontSize:"small",margin:"0",color:"white"}},a),r.a.createElement("p",{style:{color:"white"}},n," ")),r.a.createElement("p",{style:{fontSize:"x-small",color:"white"}},c)))},G=function(){var e=Object(R.f)().roomId,a=Object(n.useState)(""),t=Object(p.a)(a,2),c=t[0],l=t[1],o=Object(T.c)((function(e){return e.authReducer})),s=Object(T.b)(),i=function(){var a=Object(d.a)(u.a.mark((function a(t){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),s({type:"IS_USER_SAVED"}),a.next=4,D.post("/api/chat/"+e,{name:o.name,massage:c,pic:o.photo});case 4:return n=a.sent,a.next=7,n.data;case 7:r=a.sent,console.log(r),s({type:"SEND_NEW_MASSAGE",payload:r}),l("");case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sendingTools"},r.a.createElement(k.a,{className:"sendingToolsIcon"}),r.a.createElement("div",{className:"chatSendMassage"},r.a.createElement("form",{method:"post",onSubmit:i},r.a.createElement("input",{type:"text",name:"search",onChange:function(e){return l(e.target.value)},value:c}),r.a.createElement("button",{type:"submit",style:{display:"none"}}))),r.a.createElement(_.a,{className:"sendingToolsIcon"}),r.a.createElement(I.a,{className:"sendingToolsIcon"})))},L=function(e){var a=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chatHeader"},r.a.createElement("h1",{className:"headerName"},r.a.createElement("span",null,"#"),a),r.a.createElement("div",{className:"iconsDiv"},r.a.createElement(h.a,{className:"originalIcon"}),r.a.createElement(v.a,{className:"originalIcon"}),r.a.createElement(b.a,{className:"originalIcon"}),r.a.createElement("div",{className:"chatHeaderSearch"},r.a.createElement("input",{type:"text",name:"search",onChange:function(e){return console.log(e.target.value)},readOnly:!0}),r.a.createElement(w.a,null)),r.a.createElement(I.a,{className:"originalIcon"}),r.a.createElement(y.a,{className:"originalIcon"}))))},M=function(){var e=Object(R.f)().roomId,a=Object(T.c)((function(e){return e.massages})),t=Object(T.b)(),c=Object(n.useState)(""),l=Object(p.a)(c,2),o=l[0],s=l[1];return Object(n.useEffect)((function(){(function(){var a=Object(d.a)(u.a.mark((function a(){var n,r,c,l;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.get("/api/chat/"+e);case 2:return n=a.sent,a.next=5,n.data;case 5:return r=a.sent,t(U(r)),a.next=9,D.get("/api/getRoomName/"+e);case 9:return c=a.sent,a.next=12,c.data[0].name;case 12:l=a.sent,s(l);case 14:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[e]),r.a.createElement("div",{className:"chat"},r.a.createElement(L,{key:"1",name:o}),r.a.createElement("div",{className:"mainChatBody"},null===a||void 0===a?void 0:a.map((function(e,a){return r.a.createElement(W,{key:a,name:e.name,picUrl:e.pic,massage:e.massage,time:e.time})}))),r.a.createElement(G,null))};var V=function(){return r.a.createElement("div",{style:{height:"100%",width:"100%",display:"grid",placeItems:"center"}},r.a.createElement("div",{style:{color:"white"}},r.a.createElement("h1",null,"Welcome to Discord"),r.a.createElement("center",null,r.a.createElement("h3",null,"For What You Waiting For"),r.a.createElement("h3",null,"start chatting"))))};var F=function(){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"logoImage"},r.a.createElement("img",{src:"https://www.pngkit.com/png/full/19-191133_discord-logo-png-transparent-graphic-discord.png",alt:"djfs"})),r.a.createElement("button",{onClick:function(){s.signInWithPopup(i).catch((function(e){return alert(e)}))}},"Sign In With Google")))},P=(t(112),t(44)),z=t.n(P),B=t(69),H=t.n(B),J=t(70),X=t.n(J),K=t(71),Y=t.n(K),$=t(72),q=t.n($),Q=t(73),Z=t.n(Q),ee=t(74),ae=t.n(ee),te=t(75),ne=t.n(te),re=t(24);var ce=function(e){var a=e.id,t=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.b,{to:"/".concat(a),style:{color:"grey",textDecoration:"none"}},r.a.createElement("div",{className:"channel"},r.a.createElement("h3",null,r.a.createElement("span",{className:"hash"},"#"),t))))},le=function(){var e=Object(T.c)((function(e){return e.authReducer})),a=Object(T.b)(),t=Object(n.useState)([]),c=Object(p.a)(t,2),l=c[0],o=c[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/api/allChannels");case 2:return a=e.sent,e.next=5,a.data;case 5:t=e.sent,o(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),a({type:"IS_USER_SAVED"})}),[a]);var i=function(){var a=Object(d.a)(u.a.mark((function a(){var t,n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=prompt("enter the name of the room"),console.log(t),a.next=4,D.post("/api/createRoom/"+e.uid,{name:t});case 4:return n=a.sent,a.next=7,n.data;case 7:r=a.sent,o(r);case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebarTop"},r.a.createElement("h2",null," DISCORD")," ",r.a.createElement(z.a,null)),r.a.createElement("div",{className:"sidebarChannel"},r.a.createElement("div",{className:"sidebarChannelHeader"},r.a.createElement("div",{className:"channelHeader"},r.a.createElement(z.a,null),r.a.createElement("h3",null,"Text Chennels")),r.a.createElement(H.a,{className:"addIcon",onClick:i,titleAccess:"add new channel"})),r.a.createElement("div",{className:"channelList"},null===l||void 0===l?void 0:l.map((function(e,a){return r.a.createElement(ce,{key:a,id:e._id,name:e.name})})))),r.a.createElement("div",{className:"sidebarVoice"},r.a.createElement(X.a,{className:"voiceIcon"}),r.a.createElement("div",{className:"voiceInfo"},r.a.createElement("h3",null,"Voice Connected"),r.a.createElement("p",null,"Stream")),r.a.createElement("div",{className:"rightIcons"},r.a.createElement(Y.a,null),r.a.createElement(q.a,null))),r.a.createElement("div",{className:"sidebarProfile"},r.a.createElement(x.a,{onClick:function(){s.signOut(),a({type:"LOGOUT"})},src:null===e||void 0===e?void 0:e.photo,className:"avatar",fontSize:"larger"}),r.a.createElement("div",{className:"profileInfo"},r.a.createElement("h3",null,"@",null===e||void 0===e?void 0:e.name),r.a.createElement("p",null,"#",null===e||void 0===e?void 0:e.uid)),r.a.createElement("div",{className:"profileIcon"},r.a.createElement(Z.a,null),r.a.createElement(ae.a,null),r.a.createElement(ne.a,null))))};var oe=function(){var e=Object(T.c)((function(e){return e.authReducer})),a=Object(T.b)();return Object(n.useEffect)((function(){s.onAuthStateChanged((function(e){a(e?{type:"LOGIN",payload:{u:!0,name:e.displayName,email:e.email,photo:e.photoURL,uid:e.uid}}:{type:"LOGOUT"})})),a({type:"IS_USER_SAVED"})}),[a]),r.a.createElement("div",{className:"App"},e.u?r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null),r.a.createElement(R.c,null,r.a.createElement(R.a,{exact:!0,path:"/",component:V}),r.a.createElement(R.a,{exact:!0,path:"/:roomId",component:M}))):r.a.createElement(F,null))},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var me=t(25),ue=Object(me.b)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{u:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"IS_USER_SAVED":var t=window.localStorage.getItem("user");return JSON.parse(t);case"LOGIN":return window.localStorage.setItem("user",JSON.stringify(a.payload)),a.payload;case"LOGOUT":return window.localStorage.removeItem("user"),{u:!1};default:return e}},massages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ROOM_MASSAGES":case"SEND_NEW_MASSAGE":return a.payload;default:return e}}}),de=Object(me.c)(ue,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T.a,{store:de},r.a.createElement(re.a,null,r.a.createElement(oe,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/discordMernFrontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/discordMernFrontend","/service-worker.js");se?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ie(a,e)}))}}()},78:function(e,a,t){e.exports=t(113)},83:function(e,a,t){},87:function(e,a,t){},89:function(e,a,t){}},[[78,1,2]]]);
//# sourceMappingURL=main.0d643032.chunk.js.map